'use strict';
const levenshtein = require('fastest-levenshtein');

const dataSearch = function(data, query) {
  const searchSpace = [];
  for(const item of data) {
    searchSpace.push(item.id);
  }

  const result = levenshtein.closest(query, searchSpace);
  const distance = levenshtein.distance(query, result);
  const range = query.length < 4 ? 1 : query.length < 6 ? 2 : 3;

  if(distance > range) {
    return null;
  }
  return {result: data.get(result), distance: distance};
};

module.exports = dataSearch;

